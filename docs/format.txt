OpenCTM Format Specification - Format version 1.0
=================================================

Copyright (c) 2009 Marcus Geelnard


1. Introduction
---------------

This document describes version 1.0 of the OpenCTM file format.


2. File format specification
----------------------------

TBD


2.1 Data formats
----------------

All integer fields are stored in little endian format (least significant byte
first).

All floating point fields are stored in 32-bit binary IEEE 754 format (little
endian).

All strings are stored as a 32-bit integer string length (number of bytes)
followed by a UTF-8 format string (there is no zero termination and no BOM).


2.2 Header
----------

The file must start with a header, which looks as follows:

Offset  Type      Value         Description
-------------------------------------------------------------------------------
0       Integer   Magic identifier (0x4d54434f, or "OCTM" when read as ASCII).
4       Integer   File format version (0x00000100 = version 1.0).
8       Integer   Compression method ("MG0\0" or "MG1\0").
12      Integer   Vertex count.
16      Integer   Triangle count.
20      Integer   Boolean flags, or:ed together:
                    0x00000001 -> The file contains texture coordinates.
24      String    File comment.

The length of the file header is varibale, since it contains fields of variable
length.


2.3 Data body
-------------

The body data follows immediately after the file header. Its file offset is
dictated by the length of the file header.


3. Recommendations
------------------

There are several aspects of a 3D model that are not mandated by this
specification. However, the specification gives a set of recommendations
(best practice) that should be followed whenever possible and applicable, in
order to improve interchangeability of 3D data between different softwares and
systems.

Here are the recommendations:

1) The "up" direction of 3D coordinates should be the positive Z axis.
2) The unit of 3D coordinates should be millimeters (mm).
3) Given the three coordinates of a triangle (P1, P2, P3), the front/up
   direction of the triangle ("flat normal") should be defined by the
   normalized cross product: (P2 - P1) X (P3 - P1).
